<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book CRUD</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    
    <style type="text/css">
    body{
    text-align:center;
    }
    th{
    text-align:center;
    }
    input[type="text"]{
    display:inline-block;
    width:300px;
    
    }
    </style>
</head>
<body>
<div id="clock"></div>
<div class="container">
    <script>
        function updateClock() {
            var now = new Date();
            var hours = now.getHours();
            var minutes = now.getMinutes();
            var seconds = now.getSeconds();
            

            var date = now.toLocaleDateString('ja-JP', { year: 'numeric', month: '2-digit', day: '2-digit' });            
            var timeString = formatTime(hours) + ":" + formatTime(minutes) + ":" + formatTime(seconds);

            document.getElementById("date").innerText = date+"\n"+timeString;

            
            
        }

        function formatTime(time) {
            return time < 10 ? "0" + time : time;
        }

        window.onload = function() {
            updateClock();
            setInterval(updateClock, 1000);
        };
    </script>
    
    <div id="clock"></div>

    <div id="date"></div>    




    <h1 class="mt-4">BOOK CRUD</h1>

    <form th:action="@{/books}" th:object="${book}" method="post" class="mb-4">
        <input type="hidden" th:field="*{id}" />
        <div class="form-group">
            <label for="title">タイトル</label><br />
            <input type="text" th:field="*{title}" class="form-control" id="title" placeholder="タイトルを入力してください" required>
        </div>
        <div class="form-group">
            <label for="author">著者</label><br />
            <input type="text" th:field="*{author}" class="form-control" id="author" placeholder="著者を入力してください" required>
        </div>
        <div class="form-group">
            <label for="isbn">ISBNコード</label><br />
            <input type="text" th:field="*{isbn}" class="form-control" id="isbn" pattern="[0-9\-]{9,16}[0-9X]" placeholder="ISBNコードを入力してください" required>
            
        </div>
        <button type="submit" class="btn btn-primary">登録</button>
    </form>

    <table class="table table-bordered">
        <thead>
            <tr>
                <th>ID</th>
                <th>タイトル</th>
                <th>著者</th>
                <th>ISBNコード</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="book : ${books}">
                <td th:text="${book.id}"></td>
                <td th:text="${book.title}"></td>
                <td th:text="${book.author}"></td>
                <td th:text="${book.isbn}"></td>
                <td>
                    <a th:href="@{/books/edit/{id}(id=${book.id})}" class="btn btn-sm btn-warning">更新</a>
                    <a th:href="@{/books/delete/{id}(id=${book.id})}" class="btn btn-sm btn-danger">削除</a>
                </td>
            </tr>
        </tbody>
    </table>
</div>
</body>
</html>
